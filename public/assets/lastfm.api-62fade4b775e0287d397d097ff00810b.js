function LastFM(t){var e=t.apiKey||"",n=t.apiSecret||"",o=t.apiUrl||"http://ws.audioscrobbler.com/2.0/",r=t.cache||void 0;this.setApiKey=function(t){e=t},this.setApiSecret=function(t){n=t},this.setApiUrl=function(t){o=t},this.setCache=function(t){r=t};var a=0,s=function(t,e,n){if("POST"==n){var i,s=document.getElementsByTagName("html")[0],c=document.createElement("iframe");c.width=1,c.height=1,c.style.border="none",c.onload=function(){"undefined"!=typeof e.success&&e.success()},s.appendChild(c),i="undefined"!=typeof c.contentWindow?c.contentWindow.document:"undefined"!=typeof c.contentDocument.document?c.contentDocument.document.document:c.contentDocument.document,i.open(),i.clear(),i.write('<form method="post" action="'+o+'" id="form">');for(var u in t)i.write('<input type="text" name="'+u+'" value="'+t[u]+'">');i.write("</form>"),i.write('<script type="application/x-javascript">'),i.write('document.getElementById("form").submit();'),i.write("</script>"),i.close()}else{var f="jsonp"+(new Date).getTime()+a;a+=1;var T=g.getApiSignature(t);if("undefined"!=typeof r&&r.contains(T)&&!r.isExpired(T))return"undefined"!=typeof e.success&&e.success(r.load(T)),void 0;t.callback=f,t.format="json",window[f]=function(n){if("undefined"!=typeof r){var o=r.getExpirationTime(t);o>0&&r.store(T,n,o)}"undefined"!=typeof n.error?"undefined"!=typeof e.error&&e.error(n.error,n.message):"undefined"!=typeof e.success&&e.success(n),window[f]=void 0;try{delete window[f]}catch(i){}p&&p.removeChild(l)};var p=document.getElementsByTagName("head")[0],l=document.createElement("script"),d=[];for(var u in t)d.push(encodeURIComponent(u)+"="+encodeURIComponent(t[u]));l.src=o+"?"+d.join("&").replace(/%20/g,"+"),p.appendChild(l)}},c=function(t,n,o,i){n=n||{},o=o||{},i=i||"GET",n.method=t,n.api_key=e,s(n,o,i)},u=function(t,n,o,i,r){n=n||{},i=i||{},r=r||"GET",n.method=t,n.api_key=e,o&&"undefined"!=typeof o.key&&(n.sk=o.key),n.api_sig=g.getApiSignature(n),s(n,i,r)};this.album={addTags:function(t,e,n){"object"==typeof t.tags&&(t.tags=t.tags.join(",")),u("album.addTags",t,e,n,"POST")},getBuylinks:function(t,e){c("album.getBuylinks",t,e)},getInfo:function(t,e){c("album.getInfo",t,e)},getTags:function(t,e,n){u("album.getTags",t,e,n)},removeTag:function(t,e,n){u("album.removeTag",t,e,n,"POST")},search:function(t,e){c("album.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),u("album.share",t,n)}},this.artist={addTags:function(t,e,n){"object"==typeof t.tags&&(t.tags=t.tags.join(",")),u("artist.addTags",t,e,n,"POST")},getCorrection:function(t,e){c("artist.getCorrection",t,e)},getEvents:function(t,e){c("artist.getEvents",t,e)},getImages:function(t,e){c("artist.getImages",t,e)},getInfo:function(t,e){c("artist.getInfo",t,e)},getPastEvents:function(t,e){c("artist.getPastEvents",t,e)},getPodcast:function(t,e){c("artist.getPodcast",t,e)},getShouts:function(t,e){c("artist.getShouts",t,e)},getSimilar:function(t,e){c("artist.getSimilar",t,e)},getTags:function(t,e,n){u("artist.getTags",t,e,n)},getTopAlbums:function(t,e){c("artist.getTopAlbums",t,e)},getTopFans:function(t,e){c("artist.getTopFans",t,e)},getTopTags:function(t,e){c("artist.getTopTags",t,e)},getTopTracks:function(t,e){c("artist.getTopTracks",t,e)},removeTag:function(t,e,n){u("artist.removeTag",t,e,n,"POST")},search:function(t,e){c("artist.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),u("artist.share",t,e,n,"POST")},shout:function(t,e,n){u("artist.shout",t,e,n,"POST")}},this.auth={getMobileSession:function(t,e){t={username:t.username,authToken:md5(t.username+md5(t.password))},u("auth.getMobileSession",t,null,e)},getSession:function(t,e){u("auth.getSession",t,null,e)},getToken:function(t){u("auth.getToken",null,null,t)},getWebSession:function(t){var e=o;o="http://ext.last.fm/2.0/",u("auth.getWebSession",null,null,t),o=e}},this.chart={getHypedArtists:function(t,e,n){c("chart.getHypedArtists",t,n)},getHypedTracks:function(t,e,n){c("chart.getHypedTracks",t,n)},getLovedTracks:function(t,e,n){c("chart.getLovedTracks",t,n)},getTopArtists:function(t,e,n){c("chart.getTopArtists",t,n)},getTopTags:function(t,e,n){c("chart.getTopTags",t,n)},getTopTracks:function(t,e,n){c("chart.getTopTracks",t,n)}},this.event={attend:function(t,e,n){u("event.attend",t,e,n,"POST")},getAttendees:function(t,e,n){c("event.getAttendees",t,n)},getInfo:function(t,e){c("event.getInfo",t,e)},getShouts:function(t,e){c("event.getShouts",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),u("event.share",t,e,n,"POST")},shout:function(t,e,n){u("event.shout",t,e,n,"POST")}},this.geo={getEvents:function(t,e){c("geo.getEvents",t,e)},getMetroArtistChart:function(t,e){c("geo.getMetroArtistChart",t,e)},getMetroHypeArtistChart:function(t,e){c("geo.getMetroHypeArtistChart",t,e)},getMetroHypeTrackChart:function(t,e){c("geo.getMetroHypeTrackChart",t,e)},getMetroTrackChart:function(t,e){c("geo.getMetroTrackChart",t,e)},getMetroUniqueArtistChart:function(t,e){c("geo.getMetroUniqueArtistChart",t,e)},getMetroUniqueTrackChart:function(t,e){c("geo.getMetroUniqueTrackChart",t,e)},getMetroWeeklyChartlist:function(t,e){c("geo.getMetroWeeklyChartlist",t,e)},getMetros:function(t,e){c("geo.getMetros",t,e)},getTopArtists:function(t,e){c("geo.getTopArtists",t,e)},getTopTracks:function(t,e){c("geo.getTopTracks",t,e)}},this.group={getHype:function(t,e){c("group.getHype",t,e)},getMembers:function(t,e){c("group.getMembers",t,e)},getWeeklyAlbumChart:function(t,e){c("group.getWeeklyAlbumChart",t,e)},getWeeklyArtistChart:function(t,e){c("group.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){c("group.getWeeklyChartList",t,e)},getWeeklyTrackChart:function(t,e){c("group.getWeeklyTrackChart",t,e)}},this.library={addAlbum:function(t,e,n){u("library.addAlbum",t,e,n,"POST")},addArtist:function(t,e,n){u("library.addArtist",t,e,n,"POST")},addTrack:function(t,e,n){u("library.addTrack",t,e,n,"POST")},getAlbums:function(t,e){c("library.getAlbums",t,e)},getArtists:function(t,e){c("library.getArtists",t,e)},getTracks:function(t,e){c("library.getTracks",t,e)}},this.playlist={addTrack:function(t,e,n){u("playlist.addTrack",t,e,n,"POST")},create:function(t,e,n){u("playlist.create",t,e,n,"POST")},fetch:function(t,e){c("playlist.fetch",t,e)}},this.radio={getPlaylist:function(t,e,n){u("radio.getPlaylist",t,e,n)},search:function(t,e,n){u("radio.search",t,e,n)},tune:function(t,e,n){u("radio.tune",t,e,n)}},this.tag={getInfo:function(t,e){c("tag.getInfo",t,e)},getSimilar:function(t,e){c("tag.getSimilar",t,e)},getTopAlbums:function(t,e){c("tag.getTopAlbums",t,e)},getTopArtists:function(t,e){c("tag.getTopArtists",t,e)},getTopTags:function(t){c("tag.getTopTags",null,t)},getTopTracks:function(t,e){c("tag.getTopTracks",t,e)},getWeeklyArtistChart:function(t,e){c("tag.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){c("tag.getWeeklyChartList",t,e)},search:function(t,e){c("tag.search",t,e)}},this.tasteometer={compare:function(t,e){c("tasteometer.compare",t,e)},compareGroup:function(t,e){c("tasteometer.compareGroup",t,e)}},this.track={addTags:function(t,e,n){u("track.addTags",t,e,n,"POST")},ban:function(t,e,n){u("track.ban",t,e,n,"POST")},getBuylinks:function(t,e){c("track.getBuylinks",t,e)},getCorrection:function(t,e){c("track.getCorrection",t,e)},getFingerprintMetadata:function(t,e){c("track.getFingerprintMetadata",t,e)},getInfo:function(t,e){c("track.getInfo",t,e)},getShouts:function(t,e){c("track.getShouts",t,e)},getSimilar:function(t,e){c("track.getSimilar",t,e)},getTags:function(t,e,n){u("track.getTags",t,e,n)},getTopFans:function(t,e){c("track.getTopFans",t,e)},getTopTags:function(t,e){c("track.getTopTags",t,e)},love:function(t,e,n){u("track.love",t,e,n,"POST")},removeTag:function(t,e,n){u("track.removeTag",t,e,n,"POST")},scrobble:function(t,e,n){if(-1!=t.constructor.toString().indexOf("Array")){var o={};for(i in t)for(j in t[i])o[j+"["+i+"]"]=t[i][j];t=o}u("track.scrobble",t,e,n,"POST")},search:function(t,e){c("track.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),u("track.share",t,e,n,"POST")},unban:function(t,e,n){u("track.unban",t,e,n,"POST")},unlove:function(t,e,n){u("track.unlove",t,e,n,"POST")},updateNowPlaying:function(t,e,n){u("track.updateNowPlaying",t,e,n,"POST")}},this.user={getArtistTracks:function(t,e){c("user.getArtistTracks",t,e)},getBannedTracks:function(t,e){c("user.getBannedTracks",t,e)},getEvents:function(t,e){c("user.getEvents",t,e)},getFriends:function(t,e){c("user.getFriends",t,e)},getInfo:function(t,e){c("user.getInfo",t,e)},getLovedTracks:function(t,e){c("user.getLovedTracks",t,e)},getNeighbours:function(t,e){c("user.getNeighbours",t,e)},getNewReleases:function(t,e){c("user.getNewReleases",t,e)},getPastEvents:function(t,e){c("user.getPastEvents",t,e)},getPersonalTracks:function(t,e){c("user.getPersonalTracks",t,e)},getPlaylists:function(t,e){c("user.getPlaylists",t,e)},getRecentStations:function(t,e,n){u("user.getRecentStations",t,e,n)},getRecentTracks:function(t,e){c("user.getRecentTracks",t,e)},getRecommendedArtists:function(t,e,n){u("user.getRecommendedArtists",t,e,n)},getRecommendedEvents:function(t,e,n){u("user.getRecommendedEvents",t,e,n)},getShouts:function(t,e){c("user.getShouts",t,e)},getTopAlbums:function(t,e){c("user.getTopAlbums",t,e)},getTopArtists:function(t,e){c("user.getTopArtists",t,e)},getTopTags:function(t,e){c("user.getTopTags",t,e)},getTopTracks:function(t,e){c("user.getTopTracks",t,e)},getWeeklyAlbumChart:function(t,e){c("user.getWeeklyAlbumChart",t,e)},getWeeklyArtistChart:function(t,e){c("user.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){c("user.getWeeklyChartList",t,e)},getWeeklyTrackChart:function(t,e){c("user.getWeeklyTrackChart",t,e)},shout:function(t,e,n){u("user.shout",t,e,n,"POST")}},this.venue={getEvents:function(t,e){c("venue.getEvents",t,e)},getPastEvents:function(t,e){c("venue.getPastEvents",t,e)},search:function(t,e){c("venue.search",t,e)}};var g={getApiSignature:function(t){var e=[],o="";for(var i in t)e.push(i);e.sort();for(var r in e){var i=e[r];o+=i+t[i]}return o+=n,md5(o)}}}