(function(){var t,a,e;t=function(t){var a;return a=$(t).find('[type="submit"]'),a.attr("data-bt_submit-status",a.val()),a.val("..."),a.attr("disabled","disabled")},a=function(t){var a;return a=$(t).find('[type="submit"]'),a.val(a.attr("data-bt_submit-status")),a.removeAttr("disabled")},e=function(t){return $(t).find("[data-toggle-item]").click(function(){return $(t).find($(this).attr("data-toggle-item")).toggle()})},$(function(){return $("a[data-remote]").on("ajax:before",function(){return console.log("aaa"),$(this).attr("data-loading")&&$($(this).attr("data-loading"))?$($(this).attr("data-loading")).html('<div class="loading"></div>'):($($(this).attr("data-target")).children().hide(),$($(this).attr("data-target")).append('<div class="loading"></div>'))}).on("ajax:complete",function(t,a){var r;return console.log(t),r=this,401===a.status?FB.login(function(t){return t.authResponse?(console.log(t.authResponse),console.log("Connected! Hitting OmniAuth callback (GET users/auth/facebook/callback)..."),$.getJSON("users/auth/facebook/callback?"+$.param({access_token:t.authResponse.accessToken}),function(t){return console.log(JSON.stringify(t)),$(this).click()})):void 0},{scope:"email,read_stream"}):($($(this).attr("data-target")).hide(),$($(this).attr("data-target")).html(a.responseText),$($(this).attr("data-target")).fadeIn(1e3),e($($(this).attr("data-target"))),$($(this).attr("data-loading")).html(""))}),$("form[data-remote]").on("ajax:beforeSend",function(){return t(this)}).on("ajax:error",function(){return a(this)}).on("ajax:complete",function(t,r){return a(this),$(this).attr("data-target")&&($($(this).attr("data-target")).hide(),$($(this).attr("data-target")).html(r.responseText),$($(this).attr("data-target")).fadeIn(1e3)),e($($(this).attr("data-target")))})})}).call(this);